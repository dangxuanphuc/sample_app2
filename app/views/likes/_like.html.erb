<% pre_like = micropost.likes.find { |like| like.user_id == current_user.id} %>

<% if pre_like %>
  <%= link_to image_tag("liked.svg"), micropost_like_path(micropost, pre_like), class: "like", method: :delete, remote: true %>
<% else %>
  <%= link_to image_tag("like.svg"), micropost_likes_path(micropost), class: "like", method: :post, remote: true %>
<% end %>

<span class="counter" id="micropost-counter-<%= micropost.id %>">
  <%= pluralize(micropost.likes.count, "like") %>
</span>
